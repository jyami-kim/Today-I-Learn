# Chapter12. 복합 리팩토링

### 상속 구조 정리 (Tease Apart Inheritance)

하나의 상속 계층이 두 작업을 동시에 수행할 땐 상속 계층을 하나 더 만ㄷㄹ어서 위임을 통해 다른 계층을 호출하자

- 상속 계층이 엉키면 코드 중복이 생겨서 문제다. 특정 문제를 해결하는데 필요한 기법들이 여기저기 퍼져있어서 코드를 수정하기도 더 어려워진다.
- 계층 구조의 특정 계층에 있는 모든 클래스의 하위 클래스들이 이름 앞에 같은 형용사가 붙어있다면 한 계층으로 두 기능을 수행하는 것이다.



### 절차 코드를 객체로 전환 (Convert Procedural Design to Objects)

코드가 절차식으로 작성되어있을 땐 데이터 레코드를 객체로 바꾸고 기능을 쪼개서 각각의 객체로 옮기자.

- 각 레코드 타입을 읽기/쓰기 메서드만 있는 덤 데이터 객체로 바꾸고, 모든 절차 코드를 하나의 클래스에 넣는다. 긴 프로시저는 메서드 추출, 메서드 이용해서 각각의 적절한 덤 데이터 클래스로 옮긴다.



### 도메인 로직을 표현과 분리 (Separate Domain from Presentation)

도메인 로직이 들어 있는 GUI 클래스가 있을 땐 도메인 로직을 별도의 도메인 클래스로 떼어내자

- 객체를 말할 때 모델-뷰-컨트롤러(MVC)는 빼놓을 수 없는 개념이다.
- MVC의 핵심은 인터페이스 코드(뷰, 표현)과 도메인 로직(모델)을 분리하는 것이다.
- 클라이언트 - 서버 GUI를 사용하는 대부분의 프로그래밍 환경은 두개의 논리 계층 설계를 이용한다. 근데 이걸 사용하면 대체로 이런 방식의 설계 외에는 선택의 여지가 없어 로직을 다른 곳에 넣기 힘들어진다.



### 계층구조 추출 (Extract Hierarchy)

한 클래스에 기능이 너무 많고 일부분에라도 조건문이 많을 땐 각 조건에 해당하는 하위클래스를 작성해서 계층구조를 만들자

- 단계적으로 보강해 나가는 방식으로 설계하다보면, 처음엔 한 클래스에 하나의 기능만 구현하자고 생각하지만 나중엔 그 클래스 안에 심지어 기능을 10가지나 넣어버렸음을 깨달을 때가 많다.
- 이 클래스들을 분리할 때는 각 기능을 확인하고 구분짓고, 해당 특수 상황별 하위클래스를 작성하고 원본 클래스에 생성자를 팩토리 메서드로 전환을 적용하자.



